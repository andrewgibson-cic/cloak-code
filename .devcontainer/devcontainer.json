{
  "name": "Env-Sidecar Dev (Transparent Proxy)",
  "build": {
    "dockerfile": "../Dockerfile"
  },
  "runArgs": [
    "--gpus", "all",
    "--shm-size=8g",
    "--env-file", ".devcontainer/.env",
    "--network", "sidecar-network"
  ],
  "containerEnv": {
    "http_proxy": "http://env-sidecar:8888",
    "https_proxy": "http://env-sidecar:8888",
    "no_proxy": "localhost,127.0.0.1,env-sidecar"
  },
  "customizations": {
    "vscode": {
      "settings": {
        "python.defaultInterpreterPath": "/usr/local/bin/python",
        "go.toolsManagement.checkForUpdates": "local",
        "go.useLanguageServer": true
      },
      "extensions": [
        "ms-python.python",
        "ms-toolsai.jupyter",
        "Anthropic.claude-code",
        "golang.Go"
      ]
    }
  },
  "mounts": [
    "source=claude-config,target=/home/vscode/.config/claude,type=volume",
    "source=hf-cache,target=/home/vscode/.cache/huggingface,type=volume",
    "source=project-bashhistory,target=/home/vscode/commandhistory,type=volume"
  ],
  "remoteEnv": {
    "HISTFILE": "/home/vscode/commandhistory/.bash_history",
    "CLAUDE_CONFIG_DIR": "/home/vscode/.config/claude"
  },
  "postCreateCommand": "bash .devcontainer/setup-cert.sh"
}
